/********************************************************************************************
头文件
********************************************************************************************/
#include"basic_timer.h"
/********************************************************************************************
宏定义
********************************************************************************************/
/********************************************************************************************
变量定义
********************************************************************************************/
/********************************************************************************************
函数申明
********************************************************************************************/
extern void timeout1(void *parameter);
extern void timeout2(void *parameter);

/********************************************************************************************
** 函数名称： 定时器1初始化    
** 函数描述：对定时器进行创建，周期设置和启动
** 输入参数：msec为定时时间，单位为1ms
** 返回值  ：    无
********************************************************************************************/
int baisc_timer1_init(uint32_t msec)
{
    static  rt_timer_t  timer1;
    
    //...................... 创建定时器1,周期定时器 ......................
    timer1 = rt_timer_create("timer1",  timeout1,
                             RT_NULL, msec,              //定时周期10ms=10*rt_tick_t(系统节拍)  rt_tick_t= 1/RT_TICK_PER_SECOND(s) (RT_TICK_PER_SECOND=1000) 
                             RT_TIMER_FLAG_PERIODIC);    //周期性定时
    
	//...................... 启动定时器1  ................................
    if (timer1 != RT_NULL)
    {
        rt_timer_start(timer1);
    }
    return 0;
}

/********************************************************************************************
** 函数名称： 定时器2初始化    
** 函数描述：对定时器进行创建，周期设置和启动
** 输入参数：msec为定时时间，单位为1ms
** 返回值  ：    无
********************************************************************************************/
int baisc_timer2_init(uint32_t msec)
{  
    static  rt_timer_t  timer2;
	
    //...................... 创建定时器2,周期定时器 ......................
    timer2 = rt_timer_create("timer2", timeout2,
                             RT_NULL,  msec,            //定时周期10个节拍
                             RT_TIMER_FLAG_PERIODIC);
	
    //...................... 启动定时器2  ................................
    if (timer2 != RT_NULL)
        rt_timer_start(timer2);
    return 0;
}
